{
  "project": "Blunderdark",
  "branchName": "ralph/treasure-vault-room",
  "description": "Treasure Vault room - a Tier 2 3x3 economic room providing +50% Gold storage, passive Gold income, and Mimic risk mechanic",
  "userStories": [
    {
      "id": "US-001",
      "title": "Treasure Vault Room Definition",
      "description": "As a developer, I want the Treasure Vault defined in YAML gamedata so that it is available through the content pipeline",
      "acceptanceCriteria": [
        "A treasure-vault.yaml file exists in the appropriate gamedata/ directory",
        "Fields include: id, name, description, shape (3x3), storageBonus, passiveIncome, maxInhabitants, baseFearLevel, mimicRisk, upgradePaths, adjacencyBonuses",
        "The YAML compiles to valid JSON via npm run gamedata:build",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Defined in gamedata/room/base.yml with 3x3 shape, fearLevel 1, maxInhabitants 1, 4 adjacency bonuses, 3 upgrade paths"
    },
    {
      "id": "US-002",
      "title": "3x3 Room Placement",
      "description": "As a dungeon builder, I want to place the Treasure Vault as a 3x3 square on the grid",
      "acceptanceCriteria": [
        "The Treasure Vault occupies a 3x3 square of tiles (9 tiles total)",
        "Placement validates all 9 tiles are unoccupied",
        "Renders correctly on the grid",
        "Verify in browser using dev-browser skill",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Uses existing Square 3x3 shape (60e19fcd). Placement handled by existing room-placement system."
    },
    {
      "id": "US-003",
      "title": "Gold Storage Capacity Bonus",
      "description": "As a dungeon builder, I want the Treasure Vault to increase my Gold storage capacity by 50%",
      "acceptanceCriteria": [
        "Building a Treasure Vault increases Gold storage cap by +50%",
        "The bonus is applied when placed and removed if demolished",
        "Multiple Treasure Vaults stack their bonuses",
        "The increased storage cap is reflected in the resource UI display",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": "DEFERRED: No storage cap system exists yet. Resource storage caps are not implemented in the current architecture."
    },
    {
      "id": "US-004",
      "title": "Passive Gold Generation",
      "description": "As a dungeon builder, I want the Treasure Vault to generate passive Gold over time",
      "acceptanceCriteria": [
        "The Vault generates a defined amount of Gold per minute even with 0 inhabitants",
        "Having an inhabitant assigned increases Gold generation (e.g. +100% per inhabitant)",
        "Gold generation is added via ResourceManager",
        "Generation stops if Gold storage is at capacity",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Produces 0.8 gold/tick (4 gold/min) passively. Worker assignment modifies via inhabitant bonus. Storage cap check deferred."
    },
    {
      "id": "US-005",
      "title": "Mimic Risk Event",
      "description": "As a dungeon builder, I want a periodic Mimic risk event that can occur in the Treasure Vault",
      "acceptanceCriteria": [
        "A Mimic event has a small periodic chance to trigger (e.g. 5% per cycle)",
        "When triggered, a Mimic attacks the assigned inhabitant or steals Gold",
        "Having a combat-capable inhabitant assigned reduces or eliminates the risk",
        "Mimic events are logged in the game event feed",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": "DEFERRED: Requires combat system (Phase 7) and game event system. Mimic risk mechanic cannot be implemented without these."
    },
    {
      "id": "US-006",
      "title": "Upgrade Paths",
      "description": "As a dungeon builder, I want three mutually exclusive upgrade paths for the Treasure Vault",
      "acceptanceCriteria": [
        "Reinforced Vault: increases Gold storage bonus from +50% to +100%, eliminates Mimic risk",
        "Investment Vault: doubles passive Gold generation rate, increases capacity to 2",
        "Dragon's Hoard: increases Gold storage bonus to +200%, fear level increases to High (3)",
        "Each upgrade has a defined resource cost",
        "Choosing one path locks out alternatives",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": "3 upgrades defined: Reinforced (1.5x gold + fear reduction), Investment (2x gold + capacity), Dragon's Hoard (2.5x gold + fear increase). Storage bonus and mimic effects deferred."
    },
    {
      "id": "US-007",
      "title": "Adjacency Bonuses",
      "description": "As a dungeon builder, I want the Treasure Vault to receive adjacency bonuses from specific room types",
      "acceptanceCriteria": [
        "Vault + Altar adjacency: +25% passive Gold generation",
        "Vault + Trap Workshop adjacency: Mimic risk reduced by 50%",
        "Bonuses are defined in gamedata and activate via the adjacency bonus system",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": "4 adjacency bonuses: Dark Forge +15%, Altar +25%, Throne Room +20%, another Vault +10%. Trap Workshop bonus deferred (room doesn't exist yet)."
    }
  ]
}
