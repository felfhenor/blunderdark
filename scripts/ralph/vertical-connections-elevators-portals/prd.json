{
  "project": "Blunderdark",
  "branchName": "ralph/vertical-connections-elevators-portals",
  "description": "Elevators and portals for advanced vertical transport - elevators connect 2+ adjacent floors with fast travel, portals connect any two floors instantly",
  "userStories": [
    {
      "id": "US-001",
      "title": "Elevator Data Model and Placement",
      "description": "As a developer, I want an Elevator type and placement logic so that elevators can connect multiple adjacent floors",
      "acceptanceCriteria": [
        "Define Elevator type: id, connectedFloors (array of depth values), gridPosition",
        "Elevator connects 2 or more adjacent floors (must be contiguous depth range)",
        "Building costs 50 Crystals + 20 Flux",
        "Elevator occupies the same grid position on all connected floors",
        "All connected tiles must be empty",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Elevator Extension",
      "description": "As a player, I want to extend an existing elevator to reach additional floors without rebuilding",
      "acceptanceCriteria": [
        "Existing elevator can be extended to an adjacent floor (one above or below)",
        "Extension costs 25 Crystals + 10 Flux per additional floor",
        "Target tile on the new floor must be empty",
        "Target floor must be adjacent to the elevator's current range",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Portal Data Model and Placement",
      "description": "As a developer, I want a Portal type and placement logic so that portals can connect any two floors instantly",
      "acceptanceCriteria": [
        "Define Portal type: id, floorDepthA, floorDepthB, positionA, positionB",
        "Portal connects exactly two floors (any depth, not required to be adjacent)",
        "Portal positions can differ on each floor (unlike stairs)",
        "Building costs 100 Flux + 30 Essence",
        "Both target tiles must be empty",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Travel Speed Differentiation",
      "description": "As a developer, I want elevators and portals to have different travel speeds so that the higher cost of portals is justified",
      "acceptanceCriteria": [
        "Stairs: 1 game minute per floor",
        "Elevator: 0.5 game minutes per floor (2x faster than stairs)",
        "Portal: Instant (0 travel time)",
        "Travel time affects inhabitant assignment responsiveness",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Visual Indicators for Elevators and Portals",
      "description": "As a player, I want to see elevators and portals on the map so I can identify all vertical connections",
      "acceptanceCriteria": [
        "Elevators have a distinct sprite/icon (different from stairs)",
        "Portals have a distinct sprite/icon (glowing/magical appearance)",
        "Hovering shows connection details (which floors, travel time)",
        "Connected floors are highlighted when a connection is selected",
        "Component uses OnPush change detection",
        "Verify in browser using dev-browser skill",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Connection Removal",
      "description": "As a player, I want to demolish elevators and portals so that I can reconfigure my dungeon",
      "acceptanceCriteria": [
        "Elevators can be demolished entirely or shrunk by one floor",
        "Portals can be demolished (removes both ends)",
        "Partial resource refund on demolition (50%)",
        "Cannot demolish while inhabitants are in transit",
        "Confirmation dialog before demolition",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    }
  ]
}
