{
  "project": "Blunderdark",
  "branchName": "ralph/resource-manager",
  "description": "Resource manager tracking all 7 resource currencies (Crystals, Food, Gold, Flux, Research, Essence, Corruption) with add/subtract operations, validation, and reactive signals",
  "userStories": [
    {
      "id": "US-001",
      "title": "Define Resource Types and State",
      "description": "As a developer, I want resource types and their state defined as TypeScript types so that the resource system is type-safe",
      "acceptanceCriteria": [
        "A ResourceType union type is defined: 'crystals' | 'food' | 'gold' | 'flux' | 'research' | 'essence' | 'corruption'",
        "A ResourceState type is defined with current and max number fields for each resource",
        "A ResourceMap type maps ResourceType to ResourceState",
        "Types are in src/app/interfaces/",
        "Currency definitions in gamedata/currency/base.yml are expanded to include all 7 types with default max values",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Implemented in commit 27f7f8a"
    },
    {
      "id": "US-002",
      "title": "Resource State Signal",
      "description": "As a developer, I want resource state managed as an Angular Signal so that the UI reactively updates when resources change",
      "acceptanceCriteria": [
        "A helper file src/app/helpers/resources.ts manages resource state via signals",
        "getResource(type) returns a computed signal with current and max for that resource",
        "allResources() returns a computed signal with the full ResourceMap",
        "Resource state is integrated into GameStateWorld for IndexedDB persistence",
        "On new game, resources initialize to configured starting values",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Implemented in commit 0b26811"
    },
    {
      "id": "US-003",
      "title": "Add Resources with Cap Validation",
      "description": "As a developer, I want to add resources with automatic capping so that values never exceed storage limits",
      "acceptanceCriteria": [
        "A function addResource(type, amount) increases the resource by amount",
        "If adding would exceed max, the value is capped at max with excess silently discarded",
        "Adding a negative amount is rejected",
        "The function returns the actual amount added after capping",
        "Unit tests cover: normal add, add exceeding cap, add zero, add negative",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Implemented in commit a3c044c"
    },
    {
      "id": "US-004",
      "title": "Subtract Resources with Floor Validation",
      "description": "As a developer, I want to subtract resources with a floor check so that values never go negative",
      "acceptanceCriteria": [
        "A function subtractResource(type, amount) decreases the resource by amount",
        "If subtracting would go below 0, the operation fails and returns false with no partial subtraction",
        "A function canAfford(costs) checks if all costs can be paid",
        "A function payCost(costs) atomically subtracts multiple resources in all-or-nothing fashion",
        "Unit tests cover: normal subtract, subtract more than available, canAfford true/false, multi-resource payCost",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Implemented in commit b59eb52"
    },
    {
      "id": "US-005",
      "title": "Resource Change Callbacks",
      "description": "As a developer, I want to react to resource changes so that game systems can respond to thresholds",
      "acceptanceCriteria": [
        "A helper isResourceLow(type, threshold) returns a computed signal that is true when resource drops below threshold percentage",
        "A helper isResourceFull(type) returns a computed signal that is true when resource equals its max",
        "Unit tests verify reactive behavior of isResourceLow and isResourceFull",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "Implemented in commit e580da0"
    },
    {
      "id": "US-006",
      "title": "Resource Save and Load",
      "description": "As a player, I want my resources to persist across sessions so that I don't lose progress",
      "acceptanceCriteria": [
        "Resource state is included in GameStateWorld and saved to IndexedDB",
        "On game load, resources are restored from saved state",
        "If a new resource type is added in a game update, migration initializes it to default values",
        "Unit tests verify serialization round-trip",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    }
  ]
}
