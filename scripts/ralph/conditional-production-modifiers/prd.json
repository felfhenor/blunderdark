{
  "project": "Blunderdark",
  "branchName": "ralph/conditional-production-modifiers",
  "description": "Conditional Production Modifiers - Dynamic multipliers based on time of day, fear, hunger, floor depth, and biome that stack multiplicatively.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Define modifier type system and registry",
      "description": "As a developer, I want modifier types defined as data so new modifiers can be added without refactoring.",
      "acceptanceCriteria": [
        "A ProductionModifier type defined with id, type, multiplier, condition, description fields",
        "Modifier types include: time-of-day, fear, hunger, floor-depth, biome",
        "Each modifier has a condition function evaluating against game state",
        "Modifiers registered in a central registry",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Implement multiplicative stacking helper",
      "description": "As a developer, I want modifiers to stack multiplicatively with a helper function.",
      "acceptanceCriteria": [
        "Final production = base * (1 + adjacency%) * fearMod * hungerMod * timeMod * depthMod * biomeMod",
        "Each modifier is a multiplier (e.g., 0.8 for -20%, 1.2 for +20%)",
        "A helper function applyModifiers(base, modifiers) exists",
        "Unit tests verify correct stacking with 0, 1, 2, and 5 modifiers",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Implement time-of-day modifiers",
      "description": "As a dungeon builder, I want production to vary by time of day.",
      "acceptanceCriteria": [
        "Night gives certain rooms a bonus (e.g., Shadow rooms +20% at night)",
        "Day gives certain rooms a bonus (e.g., Grove rooms +15% during day)",
        "Modifiers transition at defined thresholds as time changes",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Implement fear-based modifiers",
      "description": "As the system, I want fear levels to modify production so that fear has gameplay consequences.",
      "acceptanceCriteria": [
        "Rooms with High or Very High fear apply a production modifier to inhabitants",
        "Modifier varies by inhabitant type (some thrive in fear, others suffer)",
        "Fear modifiers recalculated when room fear level changes",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Implement hunger-based modifiers",
      "description": "As the system, I want hunger state to modify production.",
      "acceptanceCriteria": [
        "Hungry inhabitants produce at 0.5x multiplier",
        "Starving inhabitants produce at 0.1x multiplier",
        "Fed inhabitants produce at 1.0x (no modifier)",
        "Hunger modifiers recalculated when hunger state changes",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-006",
      "title": "Implement floor depth and biome modifiers",
      "description": "As a developer, I want floor depth and biome to apply production modifiers.",
      "acceptanceCriteria": [
        "Deeper floors grant production bonuses (e.g., +5% per floor depth)",
        "Biome types apply modifiers to compatible rooms",
        "Modifiers applied based on the room's floor location",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    }
  ]
}
