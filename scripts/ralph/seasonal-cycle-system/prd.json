{
  "project": "Blunderdark",
  "branchName": "ralph/seasonal-cycle-system",
  "description": "Seasonal cycle system with four recurring seasons (Growth, Harvest, Darkness, Storms) lasting 7 game days each, providing signal-based API and UI display",
  "userStories": [
    {
      "id": "US-001",
      "title": "Define Season Types",
      "description": "As a developer, I want season types defined so that all systems can reference seasons consistently",
      "acceptanceCriteria": [
        "A Season type is defined as a union: 'growth' | 'harvest' | 'darkness' | 'storms'",
        "A SeasonState type is defined with fields: currentSeason, dayInSeason (1-7), totalSeasonCycles",
        "A constant array SEASON_ORDER defines the cycle: ['growth', 'harvest', 'darkness', 'storms']",
        "Types use type keyword per project conventions",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Season type, SeasonState, SEASON_ORDER, DAYS_PER_SEASON in src/app/interfaces/season.ts"
    },
    {
      "id": "US-002",
      "title": "Implement Season Advancement Logic",
      "description": "As a developer, I want seasons to advance automatically based on game days so that the cycle runs without player intervention",
      "acceptanceCriteria": [
        "A season advancement handler is integrated into the game loop",
        "Each game day advances dayInSeason by 1",
        "When dayInSeason exceeds 7, the season advances to the next in SEASON_ORDER",
        "When the last season (Storms) ends, the cycle resets to Growth and totalSeasonCycles increments",
        "Season state is managed via Angular Signals",
        "Unit tests verify season transitions at day boundaries",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "advanceDay() pure function + advanceGameDay() signal-based updater in src/app/helpers/season.ts; 6 advancement tests"
    },
    {
      "id": "US-003",
      "title": "Season State Signal API",
      "description": "As a developer, I want a signal-based API for querying the current season so that other systems can react to season changes",
      "acceptanceCriteria": [
        "A currentSeason signal is exposed of type Signal<Season>",
        "A dayInSeason signal is exposed of type Signal<number>",
        "A seasonProgress computed signal provides the percentage through the current season (0-100%)",
        "A helper function isSeason(season) checks the current season",
        "Signals update reactively when the game loop advances the day",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "currentSeason, dayInSeason, seasonProgress, totalSeasonCycles computed signals + isSeason() helper in season.ts"
    },
    {
      "id": "US-004",
      "title": "Season Transition Event Hook",
      "description": "As a developer, I want a hook that fires when a season transitions so that other systems can respond",
      "acceptanceCriteria": [
        "A season transition callback or event is emitted when the season changes",
        "The event includes the new season and the previous season",
        "Other systems can subscribe to this event to apply or remove season-specific effects",
        "The hook fires exactly once per season change, not per tick",
        "Unit tests verify the hook fires at the correct boundary",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "seasonTransition$ RxJS Subject with SeasonTransitionEvent type (previousSeason, newSeason) emitted from advanceGameDay()"
    },
    {
      "id": "US-005",
      "title": "Persist Season State",
      "description": "As a player, I want my season progress saved so that it continues correctly after reloading",
      "acceptanceCriteria": [
        "SeasonState is added to GameStateWorld in state-game.ts",
        "Season state is saved to IndexedDB via indexedDbSignal",
        "On load, the season resumes at the saved position",
        "A new game starts at Day 1 of Growth",
        "Unit tests verify save/load round-trip of season state",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "SeasonState in GameStateWorld, defaultSeasonState() returns Day 1 Growth, JSON round-trip test passes"
    },
    {
      "id": "US-006",
      "title": "Season Display in Game UI",
      "description": "As a player, I want to see the current season and day displayed in the game UI so that I can plan my strategy",
      "acceptanceCriteria": [
        "A season indicator component is displayed in the game header/HUD",
        "The indicator shows the season name and icon",
        "The day within the season is displayed (e.g. Day 3 of Growth)",
        "The indicator has a subtle animation or color change when the season transitions",
        "The component is standalone with OnPush change detection",
        "Verify in browser using dev-browser skill",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": false,
      "notes": ""
    }
  ]
}
