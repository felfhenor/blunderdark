{
  "project": "Blunderdark",
  "branchName": "ralph/floor-creation-system",
  "description": "Floor Creation System - Allows players to expand their dungeon vertically by creating new floors (up to 10), each with an independent 20x20 grid, depth-based resource costs, and persistent state.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Define Floor data model",
      "description": "As a developer, I want a data model for floors so that each floor has its own grid and metadata.",
      "acceptanceCriteria": [
        "A Floor type is defined in src/app/interfaces/ with fields: id (string), depth (1-10), grid (20x20 tile array), rooms, inhabitants, name",
        "Each floor has its own independent 20x20 tile grid",
        "Floor depth is an integer from 1 to 10",
        "Types use type keyword per project conventions",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Implement FloorService for floor state management",
      "description": "As a developer, I want a FloorService that manages all floor state so that other systems can query and modify floor data.",
      "acceptanceCriteria": [
        "Create FloorService in src/app/services/ with providedIn: 'root'",
        "Service uses inject() function, not constructor injection",
        "floors signal: array of all floors",
        "currentFloor signal: the currently viewed/active floor",
        "setCurrentFloor(floorId: string) method to switch active floor",
        "getFloorByDepth(depth: number) method to query floors",
        "First floor (depth 1) is created automatically at game start",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Implement floor creation with resource costs",
      "description": "As a player, I want to create new floors that cost resources scaling with depth so that I can expand my dungeon vertically.",
      "acceptanceCriteria": [
        "createFloor() method on FloorService creates a floor at the next available depth",
        "Floor creation costs resources scaling with depth (e.g., 50 Crystals + 30 Gold per depth level)",
        "Cannot create floor if maximum (10) is reached",
        "Cannot create floor if insufficient resources",
        "New floor grid is initialized with all empty/rock tiles (20x20)",
        "No rooms or inhabitants on new floor initially",
        "Grid is ready for room placement immediately after creation",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Implement floor data persistence",
      "description": "As a developer, I want floor data to persist to IndexedDB so that floors survive game reload.",
      "acceptanceCriteria": [
        "All floor data (grid, rooms, inhabitants, depth) persisted to IndexedDB",
        "Floors restore correctly on game load",
        "Current floor selection persists across sessions",
        "Handle migration from single-floor save data to multi-floor format",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Create floor creation UI with cost display",
      "description": "As a player, I want a button to create a new floor with cost information so that I can plan my expansion.",
      "acceptanceCriteria": [
        "'Create New Floor' button visible in floor navigation area",
        "Button shows resource cost for the next floor",
        "Button is disabled if max floors reached or insufficient resources",
        "Confirmation dialog before spending resources",
        "Component uses OnPush change detection and standalone component conventions",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    }
  ]
}
