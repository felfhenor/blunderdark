{
  "project": "Blunderdark",
  "branchName": "ralph/multiple-invader-types",
  "description": "Multiple Invader Types - Six distinct invader classes (Warrior, Rogue, Mage, Cleric, Paladin, Ranger) with unique stat blocks and special abilities, defined in YAML and compiled through the content pipeline.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Define invader base types and all 6 class YAML definitions",
      "description": "As a developer, I want invader types and all 6 classes defined in YAML so that varied invasion encounters are data-driven.",
      "acceptanceCriteria": [
        "InvaderClass type in src/app/interfaces/ with: id, name, description, baseStats (HP, Attack, Defense, Speed), abilities, sprite reference",
        "InvaderInstance type with: current HP, status effects, cooldowns, class reference",
        "Warrior YAML: High HP/Attack, Shield Wall ability (-25% damage 2 turns, 4-turn CD)",
        "Rogue YAML: High Speed, Disarm Trap (60% success), Backstab (double damage)",
        "Mage YAML: High magic Attack, Arcane Bolt (ignores physical Defense), Dispel",
        "Cleric YAML: High Defense, Heal (20% HP, 3-turn CD), Turn Undead",
        "Paladin YAML: High HP/Defense, Smite Evil (bonus vs corrupted), Aura of Courage (fear immunity)",
        "Ranger YAML: High Speed, Scout (reveal 2 rooms ahead), Mark Target (+20% damage 3 turns)",
        "All YAML in gamedata/invaders/; npm run gamedata:build compiles without errors",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "InvaderDefinition type in invader.ts, InvaderInstance with AbilityState[], StatusEffect[]. 6 classes in gamedata/invader/base.yml. YAML folder is 'invader' (not 'invaders')."
    },
    {
      "id": "US-002",
      "title": "Implement ContentService integration and ability resolution",
      "description": "As a developer, I want invader data loaded by ContentService and abilities resolvable for combat integration.",
      "acceptanceCriteria": [
        "ContentService loads compiled invader JSON at app init",
        "allInvaders() method/signal exposes all loaded invader classes; individual lookup by ID",
        "resolveInvaderAbility(invader, ability, targets): AbilityResult helper function",
        "AbilityResult type includes: effectType, value, duration, targetIds, cooldownApplied",
        "Cooldown tracking prevents ability reuse before cooldown expires",
        "Function is pure for testability",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "getAllInvaderDefinitions(), getInvaderDefinitionById(), resolveInvaderAbility() in invaders.ts. Cooldown managed via applyCooldown/tickCooldowns."
    },
    {
      "id": "US-003",
      "title": "Write invader type and ability unit tests",
      "description": "As a developer, I want tests verifying invader data loading and ability resolution.",
      "acceptanceCriteria": [
        "Test: All 6 invader classes load from compiled data with valid stats (all > 0)",
        "Test: Rogue disarm returns success/failure result",
        "Test: Cleric heal restores correct HP amount",
        "Test: Cooldown prevents ability reuse",
        "Test: Paladin Smite Evil deals bonus damage to corrupted targets",
        "Tests in src/app/helpers/invader.spec.ts",
        "All tests pass with npm run test",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "37 tests in invaders.spec.ts (plural). 998 total tests pass."
    }
  ]
}
