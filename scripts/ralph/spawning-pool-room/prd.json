{
  "project": "Blunderdark",
  "branchName": "ralph/spawning-pool-room",
  "description": "Spawning Pool room - a 2x2 Tier 1 utility room that auto-spawns basic inhabitants every 5 minutes with two upgrade paths",
  "userStories": [
    {
      "id": "US-001",
      "title": "Spawning Pool Room Definition",
      "description": "As a developer, I want the Spawning Pool defined in YAML gamedata so that it is available through the content pipeline",
      "acceptanceCriteria": [
        "A spawning-pool.yaml file exists in the appropriate gamedata/ directory",
        "Fields include: id, name, description, shape (2x2), spawnRate, spawnType, maxInhabitants, baseFearLevel, upgradePaths",
        "The YAML compiles to valid JSON via npm run gamedata:build",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Added to gamedata/room/base.yml with role: spawningPool, spawnRate: 25, spawnType: Goblin, spawnCapacity: 10"
    },
    {
      "id": "US-002",
      "title": "2x2 Room Placement",
      "description": "As a dungeon builder, I want to place the Spawning Pool as a 2x2 square on the grid",
      "acceptanceCriteria": [
        "The Spawning Pool occupies a 2x2 square of tiles",
        "Placement validates all 4 tiles are unoccupied",
        "Renders correctly on the grid",
        "Verify in browser using dev-browser skill",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Uses existing Square 2x2 shape (cedc340b-2f75-4811-89e5-b971659950fc). Placement and rendering handled by existing room systems."
    },
    {
      "id": "US-003",
      "title": "Auto-Spawn Timer",
      "description": "As a dungeon builder, I want the Spawning Pool to automatically produce a new inhabitant every 5 minutes so that my workforce grows passively",
      "acceptanceCriteria": [
        "A timer counts down from 5 minutes (300 seconds / equivalent ticks)",
        "When the timer hits zero, a basic inhabitant is created",
        "The timer resets and begins counting again",
        "The timer is visible on the room UI as a countdown display",
        "Spawning pauses when the game is paused",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": true,
      "notes": "spawningPoolProcess() in spawning-pool.ts runs each tick inside gameloop. Timer stored as spawnTicksRemaining on PlacedRoom. 25 ticks = 5 game-minutes."
    },
    {
      "id": "US-004",
      "title": "Spawned Inhabitant Creation",
      "description": "As the system, I want spawned inhabitants to be fully created entities that can be assigned to rooms",
      "acceptanceCriteria": [
        "Spawned inhabitants are basic type (e.g. Imp, Goblin, or default worker)",
        "They appear in the unassigned inhabitant pool",
        "They have all required fields (id, type, stats, hunger state, etc.)",
        "A notification appears when a new inhabitant spawns",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": true,
      "notes": "spawningPoolCreateInhabitant() creates full InhabitantInstance with unique id, random name suffix, normal state, unassigned. RxJS Subject emits spawn events for notifications."
    },
    {
      "id": "US-005",
      "title": "Spawn Capacity Limit",
      "description": "As the system, I want spawning to stop if a global or pool-specific limit is reached so that the game remains balanced",
      "acceptanceCriteria": [
        "Spawning stops if the total unassigned inhabitant count exceeds a threshold (e.g. 10)",
        "The timer still runs but does not produce an inhabitant at zero",
        "A message indicates Pool is full or No room for new inhabitants",
        "Spawning resumes when inhabitants are assigned and space is available",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": true,
      "notes": "spawningPoolCountUnassigned() checks unassigned count against effective capacity. Timer resets but no spawn when capacity reached."
    },
    {
      "id": "US-006",
      "title": "Upgrade Path - Rapid Spawning",
      "description": "As a dungeon builder, I want an upgrade that increases spawn rate",
      "acceptanceCriteria": [
        "Upgrade reduces spawn timer (e.g. from 5 min to 3 min)",
        "May also increase inhabitant capacity from 2 to 4",
        "Upgrade has a defined resource cost",
        "Mutually exclusive with other path at this tier",
        "Typecheck passes"
      ],
      "priority": 6,
      "passes": true,
      "notes": "Rapid Spawning upgrade: spawnRateReduction -10 (25→15 ticks), spawnCapacityBonus +5 (10→15), maxInhabitantBonus +2. Cost: 100 gold, 50 crystals, 15 essence."
    },
    {
      "id": "US-007",
      "title": "Upgrade Path - Dark Spawning",
      "description": "As a dungeon builder, I want an upgrade that spawns stronger inhabitants at the cost of higher fear",
      "acceptanceCriteria": [
        "Upgrade changes spawned inhabitant type to a stronger variant",
        "Room fear level increases to High (3)",
        "Upgrade has a defined resource cost",
        "Mutually exclusive with other path at this tier",
        "Typecheck passes"
      ],
      "priority": 7,
      "passes": true,
      "notes": "Dark Spawning upgrade: spawnTypeChange to Skeleton, fearIncrease +2. Cost: 120 gold, 60 crystals, 20 essence. Requires dark upgrade unlock."
    }
  ]
}
