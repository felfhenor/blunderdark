{
  "project": "Blunderdark",
  "branchName": "ralph/inhabitant-data-model",
  "description": "Inhabitant Data Model - Core data structures for dungeon inhabitants including type definitions, stats, traits, conditional states, Tier 1 creature definitions in YAML, and serialization for save/load.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Define InhabitantDefinition, InhabitantStats, and InhabitantTrait types",
      "description": "As a developer, I want well-typed inhabitant data structures so that all inhabitant systems share a consistent data model.",
      "acceptanceCriteria": [
        "An InhabitantDefinition type defined in src/app/interfaces/ with fields: id, name, type, tier, description, cost (Partial<Record<ResourceType, number>>), stats, traits",
        "An InhabitantStats type defined with: hp, attack, defense, speed, workerEfficiency (percentage modifier, 1.0 = 100%)",
        "No stat can be negative",
        "An InhabitantTrait type defined with: id, name, description, effectType, effectValue",
        "All types use type keyword per project conventions",
        "Types exported via barrel export at @interfaces",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Implemented in commit 9e5a466"
    },
    {
      "id": "US-002",
      "title": "Define InhabitantInstance and conditional states",
      "description": "As a developer, I want runtime inhabitant instances with conditional states so that owned inhabitants track their current status and assignment.",
      "acceptanceCriteria": [
        "An InhabitantState union type defined: 'normal' | 'scared' | 'hungry'",
        "An InhabitantInstance type defined with: instanceId, definitionId, name, state (defaults to 'normal'), assignedRoomId: string | null",
        "InhabitantInstance is JSON-serializable (no class instances, functions, or circular references)",
        "InhabitantInstance is the type stored in game state, not InhabitantDefinition",
        "GameStateWorld includes an array of InhabitantInstance for owned inhabitants",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": true,
      "notes": "Implemented in commit 4c26b3b"
    },
    {
      "id": "US-003",
      "title": "Define Tier 1 inhabitants in YAML gamedata",
      "description": "As a designer, I want 5 Tier 1 inhabitants defined in YAML so that they are data-driven and available at runtime.",
      "acceptanceCriteria": [
        "gamedata/inhabitant/base.yml defines 5 Tier 1 inhabitants: Goblin, Kobold, Skeleton, Myconid, Slime",
        "Each entry includes: id (UUID), name, type, tier (1), description, cost, stats, traits",
        "Goblin: balanced stats, 'Miner' trait (+20% crystal production)",
        "Kobold: high speed, 'Trapper' trait",
        "Skeleton: high defense, 'Guardian' trait",
        "Myconid: high worker efficiency, 'Farmer' trait (+15% food production)",
        "Slime: low stats but very cheap cost, 'Adaptable' trait",
        "YAML compiles via npm run gamedata:build without errors",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Implemented in commit 176ab28"
    },
    {
      "id": "US-004",
      "title": "Implement inhabitant serialization for save/load",
      "description": "As a developer, I want inhabitant instances to be serializable so that owned inhabitants persist across sessions.",
      "acceptanceCriteria": [
        "On save, all owned inhabitants persisted with current state and assignment to IndexedDB",
        "On load, inhabitants restored and definitions resolved from ContentService",
        "Unit tests verify serialization round-trip for an inhabitant with all fields populated",
        "Tests in src/app/helpers/ spec file",
        "All tests pass with npm run test",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": true,
      "notes": "Implemented in commit 639c6af"
    }
  ]
}
