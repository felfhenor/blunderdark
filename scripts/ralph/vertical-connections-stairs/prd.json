{
  "project": "Blunderdark",
  "branchName": "ralph/vertical-connections-stairs",
  "description": "Stairs connecting adjacent floors at matching grid coordinates with placement validation, inhabitant traversal, and visual indicators",
  "userStories": [
    {
      "id": "US-001",
      "title": "Stair Data Model",
      "description": "As a developer, I want a data model for stairs so that vertical connections are tracked in the game state",
      "acceptanceCriteria": [
        "Define Stair type: id, floorDepthA, floorDepthB, gridPosition (x, y)",
        "Stairs connect exactly two adjacent floors (depth N and N+1)",
        "Both ends of the stair share the same grid coordinates",
        "Store stairs in a VerticalConnectionService with providedIn: 'root'",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Stair Placement and Validation",
      "description": "As a player, I want to place stairs on a tile to connect adjacent floors with proper validation",
      "acceptanceCriteria": [
        "Player selects Build Stairs action and clicks a tile",
        "Validate: target tile is empty on current floor",
        "Validate: matching tile on adjacent floor is empty",
        "Validate: adjacent floor exists",
        "Validate: player has 20 Crystals (deducted on placement)",
        "Validate: no existing stair at this position",
        "Show error message for each validation failure",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Inhabitant Floor Traversal",
      "description": "As a player, I want inhabitants to move between floors via stairs so that my workforce can access all levels",
      "acceptanceCriteria": [
        "Inhabitants can be assigned to rooms on any floor connected by stairs",
        "Movement between floors takes 1 game minute per floor traversed",
        "Inhabitants path to the nearest stair, traverse, then path to destination",
        "Resources flow between floors through stair connections",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Stair Visual Indicators",
      "description": "As a player, I want to see visual indicators showing where stairs are so I can find floor connections",
      "acceptanceCriteria": [
        "Stair tile has a distinct visual (stair icon/sprite)",
        "Show Up or Down indicator based on connection direction",
        "Stair is visible on both connected floors",
        "Hovering/clicking a stair shows which floor it connects to",
        "Component uses OnPush change detection",
        "Verify in browser using dev-browser skill",
        "Typecheck passes"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Stair Removal",
      "description": "As a player, I want to remove stairs so that I can reorganize my dungeon layout",
      "acceptanceCriteria": [
        "Player can demolish a stair (removes from both floors)",
        "Demolition refunds 10 Crystals (partial refund)",
        "Cannot demolish if inhabitants are currently traversing the stair",
        "Confirmation dialog before demolition",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    }
  ]
}
