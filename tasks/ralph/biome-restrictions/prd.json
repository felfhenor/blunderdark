{
  "project": "Blunderdark",
  "branchName": "ralph/biome-restrictions",
  "description": "Biome Restrictions - Enforce biome-specific room placement restrictions with validation and UI feedback.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Define biome restriction data",
      "description": "As a developer, I want biome restrictions defined as data so that they are easy to maintain and extend.",
      "acceptanceCriteria": [
        "Define restriction rules as a config map: biome type -> list of restricted room types",
        "Volcanic: Cannot build Underground Lake, Mushroom Grove",
        "Flooded: Cannot build Soul Well, Torture Chamber",
        "Crystal Cave: Max 5 Crystal Mines per floor",
        "Corrupted: Cannot build pure/harmony rooms",
        "Fungal: No specific restrictions",
        "Neutral: No restrictions",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Implement restriction check helper function",
      "description": "As a developer, I want a pure helper function for restriction checks so that it can be tested and reused.",
      "acceptanceCriteria": [
        "Create canBuildRoomOnFloor(roomType, biome, currentRoomCounts) returning { allowed, reason? }",
        "Function handles both binary restrictions and count limits",
        "Function is pure (no service dependencies)",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Integrate restriction validation with room placement",
      "description": "As a developer, I want room placement to check biome restrictions so that invalid rooms cannot be built.",
      "acceptanceCriteria": [
        "Before placing a room, check the floor's biome against restriction rules",
        "If room type is restricted by the biome, block placement",
        "If room type has a count limit, check current count on the floor",
        "Return a specific error message explaining why placement is blocked",
        "Typecheck passes"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Display restriction feedback in build UI",
      "description": "As a player, I want to see which rooms I cannot build on the current floor.",
      "acceptanceCriteria": [
        "In the room build menu, restricted rooms are grayed out or marked",
        "Hovering over a restricted room shows the reason",
        "Rooms at their biome limit show remaining count (e.g., Crystal Mine 3/5)",
        "Component uses OnPush change detection",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 4,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-005",
      "title": "Add biome restriction unit tests",
      "description": "As a developer, I want tests for biome restriction validation.",
      "acceptanceCriteria": [
        "Test: Underground Lake blocked on Volcanic floor",
        "Test: Soul Well blocked on Flooded floor",
        "Test: Crystal Mine allowed up to 5 on Crystal Cave floor",
        "Test: Crystal Mine blocked at 5+ on Crystal Cave floor",
        "Test: All rooms allowed on Neutral floor",
        "Tests in src/app/helpers/biome-restrictions.spec.ts",
        "All tests pass with npm run test",
        "Typecheck passes"
      ],
      "priority": 5,
      "passes": false,
      "notes": ""
    }
  ]
}
