{
  "project": "Blunderdark",
  "branchName": "ralph/floor-depth-modifiers",
  "description": "Floor Depth Modifiers - Automatic production modifiers based on floor depth: shallow floors favor food, mid-depth floors boost crystal/gold, deep floors excel at rare resources with food penalties and increased corruption.",
  "userStories": [
    {
      "id": "US-001",
      "title": "Define depth modifier tiers and computation helper",
      "description": "As a developer, I want depth modifiers defined as data with a pure computation helper so that they can be easily tuned and tested.",
      "acceptanceCriteria": [
        "Modifier tiers defined in a configuration structure (not hardcoded in logic)",
        "Floor 1: +20% Food, -10% Corruption",
        "Floors 2-3: No modifiers (baseline)",
        "Floors 4-6: +10% Crystal/Gold per floor depth, +5% Corruption per floor, -15% Food",
        "Floors 7-9: +20% Crystal/Gold per floor depth, +10% Corruption per floor, -30% Food",
        "Floor 10: +50% rare resources, -50% Food",
        "A pure helper function getFloorModifiers(depth: number): ResourceModifier[] in src/app/helpers/",
        "Each modifier specifies resource type and percentage change",
        "Typecheck passes"
      ],
      "priority": 1,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-002",
      "title": "Integrate depth modifiers with production system",
      "description": "As a developer, I want depth modifiers to automatically apply to production calculations so that floor depth matters strategically.",
      "acceptanceCriteria": [
        "Depth modifiers integrate with the resource production system pipeline",
        "Modifiers are tagged with source 'floor-depth' for identification",
        "Modifiers apply to all rooms on the respective floor",
        "Modifiers stack with other sources (time-of-day, biome, adjacency) multiplicatively",
        "Modifiers are computed signals derived from floor depth, updating reactively",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-003",
      "title": "Display depth modifiers in floor info panel",
      "description": "As a player, I want to see the depth modifiers for each floor so that I can plan what to build where.",
      "acceptanceCriteria": [
        "Depth modifiers shown in the floor info panel",
        "Each modifier displays resource type and percentage (e.g., '+20% Food', '-10% Corruption')",
        "Positive modifiers shown in green, negative in red",
        "Modifiers visible when hovering/selecting a floor in the floor selector",
        "Component uses OnPush change detection",
        "Typecheck passes",
        "Verify in browser using dev-browser skill"
      ],
      "priority": 3,
      "passes": false,
      "notes": ""
    },
    {
      "id": "US-004",
      "title": "Write unit tests for depth modifier calculations",
      "description": "As a developer, I want tests for depth modifier calculations so that the math is verified for all tiers.",
      "acceptanceCriteria": [
        "Test: Floor 1 returns +20% Food, -10% Corruption",
        "Test: Floors 2-3 return no modifiers",
        "Test: Floor 5 returns correct Crystal, Gold, Corruption, Food modifiers scaled by depth",
        "Test: Floor 10 returns +50% rare resources, -50% Food",
        "Tests in src/app/helpers/floor-modifiers.spec.ts",
        "All tests pass with npm run test",
        "Typecheck passes"
      ],
      "priority": 2,
      "passes": false,
      "notes": ""
    }
  ]
}
