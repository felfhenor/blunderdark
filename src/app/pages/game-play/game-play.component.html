<ng-template #placeholderPanel>
  <div class="p-4 text-sm opacity-50">Panel content will be migrated here.</div>
</ng-template>

<ng-template #floorsPanel>
  <div class="p-2">
    <app-panel-floor-selector />
  </div>
</ng-template>

<ng-template #timePanel>
  <div class="p-2">
    <app-panel-time-of-day />
  </div>
</ng-template>

<ng-template #buildPanel>
  <div class="p-2">
    <app-panel-room-select />
  </div>
</ng-template>

<ng-template #rosterPanel>
  <div class="p-2">
    <app-panel-roster />
  </div>
</ng-template>

<ng-template #altarPanel>
  <div class="p-2">
    <app-panel-altar />
  </div>
</ng-template>

<ng-template #reputationPanel>
  <div class="p-2">
    <app-panel-reputation />
  </div>
</ng-template>

<ng-template #trainingPanel>
  <div class="p-2">
    <app-panel-training-grounds />
  </div>
</ng-template>

<ng-template #summoningPanel>
  <div class="p-2">
    <app-panel-summoning-circle />
  </div>
</ng-template>

<ng-template #forgePanel>
  <div class="p-2">
    <app-panel-dark-forge />
  </div>
</ng-template>

<ng-template #alchemyPanel>
  <div class="p-2">
    <app-panel-alchemy-lab />
  </div>
</ng-template>

<ng-template #torturePanel>
  <div class="p-2">
    <app-panel-torture-chamber />
  </div>
</ng-template>

<ng-template #merchantPanel>
  <div class="p-2">
    <app-panel-merchant />
  </div>
</ng-template>

<div class="game-container">
  <div class="resource-bar-wrapper">
    <app-resource-bar-top />
  </div>
  <app-side-tab-rail
    [tabs]="tabDefinitions()"
    [(activePanel)]="activePanel"
  />
  <app-side-tab-rail
    class="!top-auto !bottom-0 !items-end"
    [tabs]="modalTabDefinitions()"
    position="bottom"
    (modalTabClick)="onModalTabClick($event)"
  />
  <app-grid />

  <div class="morale-bar-wrapper">
    <app-morale-bar />
  </div>

  @if (hasSelectedRoom()) {
    <div class="absolute right-0 top-0 z-30 w-96 max-h-full overflow-y-auto bg-base-100 shadow-xl border-l border-base-300 rounded-l-lg p-2 opacity-80 hover:opacity-100 transition-opacity" (click)="$event.stopPropagation()">
      <app-panel-room-info />
    </div>
  }

  @if (hasSelectedHallway()) {
    <div class="absolute right-0 top-0 z-30 w-96 max-h-full overflow-y-auto bg-base-100 shadow-xl border-l border-base-300 rounded-l-lg p-2 opacity-80 hover:opacity-100 transition-opacity" (click)="$event.stopPropagation()">
      <app-panel-hallway-info />
    </div>
  }
</div>

<app-game-research [(visible)]="showResearch" />
<app-panel-fusion [(visible)]="showFusion" />
<app-panel-victory />
<app-victory-menu [(visible)]="showVictoryMenu" />

@if (isAutosaving()) {
  <div class="fixed bottom-4 right-4 z-50 flex items-center gap-2 bg-base-300 rounded-lg px-3 py-2 shadow-lg opacity-80 pointer-events-none">
    <span class="loading loading-spinner loading-xs"></span>
    <span class="text-xs font-mono">Saving...</span>
  </div>
}

<ng-container [appTeleportOutlet]="'menu-options'"></ng-container>
