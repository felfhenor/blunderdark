@reference 'tailwindcss';

:host {
  @apply block;
}

.research-container {
  height: 70vh;
  max-height: 700px;
}

// --- Node Cards ---

.node-card {
  @apply relative flex flex-col items-center justify-center gap-1;
  @apply rounded-lg border-2 p-3 cursor-pointer transition-all;
  border-color: color-mix(in oklch, var(--color-base-content) 20%, transparent);

  &:hover {
    @apply shadow-md;
    transform: translateY(-1px);
  }

  &.node-selected {
    @apply ring-2 ring-offset-1;
    ring-color: var(--color-primary);
  }
}

.node-completed {
  border-color: var(--color-success);
  background: color-mix(in oklch, var(--color-success) 10%, transparent);
}

.node-active {
  border-color: var(--color-info);
  animation: pulse-border 2s ease-in-out infinite;
}

.node-available {
  border-color: var(--color-warning);
  background: color-mix(in oklch, var(--color-warning) 5%, transparent);
  box-shadow: 0 0 8px color-mix(in oklch, var(--color-warning) 30%, transparent);
}

.node-locked {
  @apply opacity-40;
  border-color: color-mix(in oklch, var(--color-base-content) 10%, transparent);
}

.node-icon {
  @apply absolute top-1 right-1 text-xs leading-none;
}

.node-progress-mini {
  @apply w-full mt-1;

  .progress {
    height: 4px;
  }
}

// --- Tier Layout ---

.tier-group {
  @apply w-full;
}

.tier-nodes {
  display: grid;
  gap: 1rem;
}

.tier-connector {
  @apply flex justify-center;

  .connector-line {
    width: 2px;
    height: 16px;
    background: color-mix(in oklch, var(--color-base-content) 20%, transparent);
  }
}

// --- Animations ---

@keyframes pulse-border {
  0%,
  100% {
    border-color: var(--color-info);
    box-shadow: 0 0 4px color-mix(in oklch, var(--color-info) 30%, transparent);
  }
  50% {
    border-color: color-mix(in oklch, var(--color-info) 50%, transparent);
    box-shadow: 0 0 12px color-mix(in oklch, var(--color-info) 50%, transparent);
  }
}

// --- Detail Panel ---

.detail-panel {
  background: var(--color-base-200);
}
