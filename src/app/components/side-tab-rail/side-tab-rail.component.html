<div
  class="side-tab-rail flex flex-col gap-1 p-1"
  [class.has-active-panel]="!!activePanel()"
>
  @for (tab of visibleTabs(); track tab.id) {
    <button
      class="tab-btn flex items-center bg-base-200 rounded-lg whitespace-nowrap py-2 px-2 text-xs transition-colors cursor-pointer"
      [class.bg-primary]="activePanel() === tab.id && !tab.isModal"
      [class.text-primary-content]="activePanel() === tab.id && !tab.isModal"
      [class.font-bold]="activePanel() === tab.id && !tab.isModal"
      [style.opacity]="activePanel() === tab.id && !tab.isModal ? 1 : 0.7"
      (click)="onTabClick(tab)"
    >
      @if (tab.icon) {
        <app-icon
          [name]="tab.icon"
          size="32px"
          class="shrink-0"
          [class.icon-glow]="tab.iconGlow?.()"
        />
      }
      <span class="tab-label ml-2">{{ tab.label }}</span>
    </button>
  }
</div>

@if (activePanelTemplate(); as tmpl) {
  <div
    class="panel-overlay panel-visible bg-base-100 shadow-xl border-r border-base-300 rounded-br-lg"
  >
    <ng-container [ngTemplateOutlet]="tmpl" />
  </div>
}
