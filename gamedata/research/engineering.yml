# Engineering Branch research nodes (tier 2+)
# Root node (Basic Engineering) is in base.yml
#
# Tree structure:
#   Basic Engineering (T1)
#   ├── Advanced Construction (T2)
#   │   ├── Master Architecture (T3)
#   │   │   └── Siege Works (T4) [+Trap Design]
#   │   └── Fusion Core (T3)
#   ├── Trap Design (T2)
#   │   └── Automated Defenses (T3)
#   │       └── Mechanical Sentinels (T4) [+Trap Design]
#   ├── Elevator Action (T2)
#   ├── Teleporters (T4) [Master Architecture]
#   └── Advanced Manufacturing (T2)
#       └── Dark Forge Mastery (T3)
#           └── Golem Assembly (T4) [+Master Architecture]
#   War Machines (T5) [Siege Works + Mechanical Sentinels]
#   Industrial Mastery (T5) [Golem Assembly + Siege Works]
#   Grand Artificer (T6) [War Machines + Industrial Mastery]

# --- TIER 2: Three paths branch from Basic Engineering ---

- id: 9e81a510-1b8d-4c20-8e7f-56a4b2f063fc
  name: Advanced Construction
  description: Develop superior building techniques that allow for larger and more resilient dungeon structures.
  branch: engineering
  cost:
    research: 25
    gold: 5
  prerequisiteResearchIds:
    - Basic Engineering
  unlocks:
    - type: room
      targetRoomId: Underground Lake
    - type: room
      targetRoomId: Treasure Vault
  tier: 2
  requiredTicks: 150

- id: eb8b543e-0b7d-47f8-9192-7fba92e9ea34
  name: Trap Design
  description: Study the fundamentals of mechanical trap construction, from simple pitfalls to pressure plates.
  branch: engineering
  cost:
    research: 25
    gold: 5
  prerequisiteResearchIds:
    - Basic Engineering
  unlocks:
    - type: room
      targetRoomId: Trap Workshop
    - type: room
      targetRoomId: Training Grounds
  tier: 2
  requiredTicks: 150

- id: a3f17c82-6d4e-4b91-9a53-2e8f0c7d1b64
  name: Elevator Action
  description: Engineer vertical transport systems that move inhabitants between floors far more efficiently than stairs.
  branch: engineering
  cost:
    research: 25
    gold: 5
  prerequisiteResearchIds:
    - Basic Engineering
  unlocks:
    - type: feature_flag
      featureFlag: elevators
  tier: 2
  requiredTicks: 150

- id: 7c76338a-a73a-4b12-a726-beec4e93974d
  name: Advanced Manufacturing
  description: Establish efficient production lines for crafting materials, weapons, and dungeon components.
  branch: engineering
  cost:
    research: 25
    gold: 5
  prerequisiteResearchIds:
    - Basic Engineering
  unlocks:
    - type: passive_bonus
      bonusType: goldProduction
      value: 0.10
      description: +10% gold production from all sources
  tier: 2
  requiredTicks: 150

# --- TIER 3: Specializations ---

- id: 6fc62ebf-39d2-47b0-9ba3-92c0241f6146
  name: Master Architecture
  description: Design complex multi-room structures with reinforced walls and optimized layouts for maximum efficiency.
  branch: engineering
  cost:
    research: 50
    gold: 15
  prerequisiteResearchIds:
    - Advanced Construction
  unlocks:
    - type: passive_bonus
      bonusType: roomCapacity
      value: 1
      description: +1 max inhabitant capacity for all rooms
  tier: 3
  requiredTicks: 300

- id: b8e4a1c3-7d2f-4f9b-8a6e-c5d0e1f2a3b4
  name: Fusion Core Construction
  description: Develop the arcane engineering principles needed to construct a Fusion Core, enabling creature fusion.
  branch: engineering
  cost:
    research: 50
    gold: 15
  prerequisiteResearchIds:
    - Advanced Construction
  unlocks:
    - type: room
      targetRoomId: Fusion Core
  tier: 3
  requiredTicks: 300

- id: 687957be-a605-4d0d-811e-591a71f21300
  name: Automated Defenses
  description: Create self-resetting traps and automated defense systems that require no inhabitant intervention.
  branch: engineering
  cost:
    research: 50
    gold: 15
  prerequisiteResearchIds:
    - Trap Design
  unlocks:
    - type: passive_bonus
      bonusType: trapDamage
      value: 0.15
      description: +15% trap damage
  tier: 3
  requiredTicks: 300

- id: e1af3b41-800b-4190-82de-7e8a2e626986
  name: Dark Forge Mastery
  description: Construct a forge powered by dungeon energy, capable of smelting exotic materials into powerful equipment.
  branch: engineering
  cost:
    research: 50
    gold: 15
  prerequisiteResearchIds:
    - Advanced Manufacturing
  unlocks:
    - type: passive_bonus
      bonusType: goldProduction
      value: 0.15
      description: +15% gold production from all sources
  tier: 3
  requiredTicks: 300

# --- TIER 4: Advanced combinations ---

- id: d7b42e19-3a8f-4c65-b1d0-9e6f5a2c8d73
  name: Teleporters
  description: Master the spatial folding techniques required to create portal gateways that instantly transport inhabitants across vast distances.
  branch: engineering
  cost:
    research: 100
    gold: 30
    crystals: 15
  prerequisiteResearchIds:
    - Master Architecture
  unlocks:
    - type: feature_flag
      featureFlag: portals
  tier: 4
  requiredTicks: 500

- id: 127df468-753f-47a9-ab98-ab8b212cac69
  name: Siege Works
  description: Build massive defensive installations and siege equipment to repel even the largest invasion forces.
  branch: engineering
  cost:
    research: 100
    gold: 30
    crystals: 15
  prerequisiteResearchIds:
    - Master Architecture
    - Trap Design
  unlocks:
    - type: passive_bonus
      bonusType: defenseBonus
      value: 0.15
      description: +15% defense for all inhabitants
  tier: 4
  requiredTicks: 500

- id: c1509327-9bf8-41ad-b674-9c79137fe3b9
  name: Mechanical Sentinels
  description: Construct autonomous mechanical guardians that patrol hallways and defend key positions.
  branch: engineering
  cost:
    research: 100
    gold: 30
    crystals: 15
  prerequisiteResearchIds:
    - Automated Defenses
    - Trap Design
  unlocks:
    - type: passive_bonus
      bonusType: trapDamage
      value: 0.20
      description: +20% trap damage
  tier: 4
  requiredTicks: 500

- id: 0493134f-837b-4636-909a-ca334d605466
  name: Golem Assembly
  description: Assemble powerful golems from forged materials, combining architectural precision with manufacturing might.
  branch: engineering
  cost:
    research: 100
    gold: 30
    crystals: 15
  prerequisiteResearchIds:
    - Dark Forge Mastery
    - Master Architecture
  unlocks:
    - type: passive_bonus
      bonusType: goldProduction
      value: 0.20
      description: +20% gold production from all sources
  tier: 4
  requiredTicks: 500

# --- TIER 5: Pinnacle powers ---

- id: 6279db88-f682-4738-973c-fdd56c9d628f
  name: War Machines
  description: Engineer devastating war machines that combine siege weaponry with automated defense systems.
  branch: engineering
  cost:
    research: 200
    gold: 60
    crystals: 30
  prerequisiteResearchIds:
    - Siege Works
    - Mechanical Sentinels
  unlocks:
    - type: passive_bonus
      bonusType: defenseBonus
      value: 0.25
      description: +25% defense for all inhabitants
  tier: 5
  requiredTicks: 750

- id: 4caa2af0-5ecd-48f5-b012-0223c2d3bb79
  name: Industrial Mastery
  description: Achieve peak manufacturing efficiency, producing golems and siege equipment at unprecedented scale.
  branch: engineering
  cost:
    research: 200
    gold: 60
    crystals: 30
  prerequisiteResearchIds:
    - Golem Assembly
    - Siege Works
  unlocks:
    - type: passive_bonus
      bonusType: craftingSpeed
      value: 0.25
      description: +25% crafting speed in all workshops
  tier: 5
  requiredTicks: 750

# --- TIER 6: Ultimate mastery ---

- id: 4c37ee38-c15a-4dc8-9a96-90f21414ecb8
  name: Grand Artificer
  description: Attain the ultimate mastery of engineering, creating wonders that blur the line between construction and creation.
  branch: engineering
  cost:
    research: 400
    gold: 120
    crystals: 60
  prerequisiteResearchIds:
    - War Machines
    - Industrial Mastery
  unlocks:
    - type: passive_bonus
      bonusType: engineeringMastery
      value: 0.50
      description: +50% to all engineering branch bonuses
  tier: 6
  requiredTicks: 1000
