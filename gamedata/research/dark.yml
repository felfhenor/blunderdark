# Dark Branch research nodes (tier 2+)
# Root node (Dark Arts Fundamentals) is in base.yml
#
# Tree structure:
#   Dark Arts Fundamentals (T1)
#   ├── Soul Manipulation (T2)
#   │   └── Soul Well Mastery (T3)
#   │       └── Soul Forge (T5) [+Dark Rituals]
#   ├── Shadow Magic (T2)
#   │   └── Corruption Control (T3)
#   │       └── Shadow Weaving (T4) [+Shadow Magic]
#   ├── Necromancy (T2)
#   │   └── Undead Mastery (T3)
#   │       └── Dark Rituals (T4) [+Soul Well Mastery]
#   └── Corrupted Biome (T2)
#               ├── Abyssal Gateway (T5) [+Shadow Weaving]
#               └── Soul Forge (T5) [+Soul Well Mastery→ already via Dark Rituals]
#   Dark Apotheosis (T6) [Abyssal Gateway + Soul Forge]

# --- TIER 2: Three paths branch from Dark Arts Fundamentals ---

- id: 36c41bbd-675c-4300-abf7-273cd46333ef
  name: Soul Manipulation
  description: Learn to harvest and channel soul energy, the fundamental currency of dark power.
  branch: dark
  cost:
    research: 25
    essence: 5
  prerequisiteResearchIds:
    - Dark Arts Fundamentals
  unlocks:
    - type: passive_bonus
      bonusType: essenceProduction
      value: 0.10
      description: +10% essence production from all sources
  tier: 2
  requiredTicks: 150

- id: 1b956dec-e63e-467d-bd4d-20541f157d40
  name: Shadow Magic
  description: Harness the power of shadows to conceal, deceive, and strike from darkness.
  branch: dark
  cost:
    research: 25
    essence: 5
  prerequisiteResearchIds:
    - Dark Arts Fundamentals
  unlocks:
    - type: passive_bonus
      bonusType: corruptionGeneration
      value: 0.10
      description: +10% corruption generation
  tier: 2
  requiredTicks: 150

- id: 303c1628-2834-4abf-a1e2-617fb554d151
  name: Necromancy
  description: The art of animating the dead, turning fallen enemies into loyal servants.
  branch: dark
  cost:
    research: 25
    essence: 5
  prerequisiteResearchIds:
    - Dark Arts Fundamentals
  unlocks:
    - type: inhabitant
      targetInhabitantId: Skeleton
  tier: 2
  requiredTicks: 150

- id: 8d3e5a72-1f4c-49b8-b6d2-c7a0e9f31d58
  name: Corrupted Biome
  description: Harness shadow energy to twist stone and earth, enabling the creation of floors pulsing with malevolent corruption.
  branch: dark
  cost:
    research: 25
    essence: 5
  prerequisiteResearchIds:
    - Dark Arts Fundamentals
  unlocks:
    - type: feature_flag
      featureFlag: biome_corrupted
      description: Corrupted Biome
  tier: 2
  requiredTicks: 150

# --- TIER 3: Specializations ---

- id: 212cfb42-9e00-4114-b755-32c6c60ca482
  name: Undead Mastery
  description: Exert absolute control over undead minions, increasing their strength and durability.
  branch: dark
  cost:
    research: 50
    essence: 15
  prerequisiteResearchIds:
    - Necromancy
  unlocks:
    - type: passive_bonus
      bonusType: undeadEfficiency
      value: 0.20
      description: +20% undead worker efficiency
  tier: 3
  requiredTicks: 300

- id: 8a4edb8b-65bb-4d08-a30c-45097e1e8483
  name: Soul Well Mastery
  description: Construct a reservoir for captured souls, providing a steady stream of dark energy.
  branch: dark
  cost:
    research: 50
    essence: 15
  prerequisiteResearchIds:
    - Soul Manipulation
  unlocks:
    - type: passive_bonus
      bonusType: essenceProduction
      value: 0.15
      description: +15% essence production from all sources
  tier: 3
  requiredTicks: 300

- id: b4b92c13-7086-471f-8855-5c01301e73ea
  name: Corruption Control
  description: Master the volatile forces of corruption, bending them to your will without self-destruction.
  branch: dark
  cost:
    research: 50
    essence: 15
    corruption: 5
  prerequisiteResearchIds:
    - Shadow Magic
  unlocks:
    - type: passive_bonus
      bonusType: corruptionResistance
      value: 0.10
      description: Corruption thresholds increased by 10%
  tier: 3
  requiredTicks: 300

# --- TIER 4: Advanced combinations ---

- id: 153fd103-9151-4b42-8d1a-8c39f69fd377
  name: Dark Rituals
  description: Perform elaborate ceremonies combining necromancy and soul magic for devastating effects.
  branch: dark
  cost:
    research: 100
    essence: 30
    corruption: 15
  prerequisiteResearchIds:
    - Undead Mastery
    - Soul Well Mastery
  unlocks:
    - type: passive_bonus
      bonusType: essenceProduction
      value: 0.20
      description: +20% essence production from all sources
  tier: 4
  requiredTicks: 500

- id: 7758e38b-773b-426a-863e-c154566a49fa
  name: Shadow Weaving
  description: Weave shadows into semi-physical constructs that serve as both shield and weapon.
  branch: dark
  cost:
    research: 100
    essence: 30
    corruption: 15
  prerequisiteResearchIds:
    - Shadow Magic
    - Corruption Control
  unlocks:
    - type: passive_bonus
      bonusType: fearReduction
      value: 1
      description: All rooms gain +1 fear reduction
  tier: 4
  requiredTicks: 500

# --- TIER 5: Pinnacle powers ---

- id: de9b2001-7a9d-415c-bf42-936c813e02c5
  name: Abyssal Gateway
  description: Tear open a rift to the abyss, summoning forth entities of immense dark power.
  branch: dark
  cost:
    research: 200
    essence: 60
    corruption: 30
  prerequisiteResearchIds:
    - Dark Rituals
    - Shadow Weaving
  unlocks:
    - type: passive_bonus
      bonusType: essenceProduction
      value: 0.25
      description: +25% essence production from all sources
  tier: 5
  requiredTicks: 750

- id: 031cb877-8674-4213-ae08-424ca51fd8c8
  name: Soul Forge
  description: Forge captured souls into powerful artifacts and imbue minions with stolen life force.
  branch: dark
  cost:
    research: 200
    essence: 60
    corruption: 30
  prerequisiteResearchIds:
    - Dark Rituals
  unlocks:
    - type: passive_bonus
      bonusType: inhabitantStats
      value: 0.10
      description: +10% to all inhabitant combat stats
  tier: 5
  requiredTicks: 750

# --- TIER 6: Ultimate mastery ---

- id: ecd83419-15ec-4fde-9379-bde84da01a77
  name: Dark Apotheosis
  description: Transcend mortal limitations through total mastery of dark forces, becoming an avatar of darkness itself.
  branch: dark
  cost:
    research: 400
    essence: 120
    corruption: 60
  prerequisiteResearchIds:
    - Abyssal Gateway
    - Soul Forge
  unlocks:
    - type: passive_bonus
      bonusType: darkMastery
      value: 0.50
      description: +50% to all dark branch bonuses
  tier: 6
  requiredTicks: 1000
